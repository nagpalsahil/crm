"use strict";(self.webpackChunkcrm=self.webpackChunkcrm||[]).push([[876],{3876:(M,s,a)=>{a.r(s),a.d(s,{DashboardModule:()=>S});var l=a(9808),u=a(3047),p=a(3600),e=a(5e3),g=a(7234),h=a(5330),r=a(3075),x=a(1424),f=a(845);function _(t,n){1&t&&(e.TgZ(0,"small",3),e._uU(1,"Enter valid Application Number or Owner client Id."),e.qZA())}let D=(()=>{class t{constructor(i,o){this.policyService=i,this.ref=o,this.loading=!0,this.hasData=!1,this.showError=!1}ngOnInit(){this.policyService.getPolicies().then(i=>{this.policies=i})}searchData(){const i=[];for(let o=0;o<this.policies.length;o++){const c=this.policies[o];(c.applicationName==this.searchValue||c.ownerClientId==this.searchValue)&&i.push(this.calculateData(c))}this.hasData=i.length>0,this.hasData?this.ref.close(i):this.showError=!0}calculateData(i){let o=new Date(i.policyInforcementDate),d=(new Date).getTime()-o.getTime();return i.policyAging=d,i.priority=Math.floor(3*Math.random())+1,i}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(g.d),e.Y36(h.E7))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-search-box"]],decls:3,vars:2,consts:[["type","text","placeholder","Application ID/ Owner client ID","pInputText","",1,"w-100",3,"ngModel","ngModelChange"],["id","searchValue-help","class","p-error",4,"ngIf"],["pButton","","type","button","label","Search",1,"float-right","mt-3",3,"click"],["id","searchValue-help",1,"p-error"]],template:function(i,o){1&i&&(e.TgZ(0,"input",0),e.NdJ("ngModelChange",function(d){return o.searchValue=d}),e.qZA(),e.YNc(1,_,2,0,"small",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return o.searchData()}),e.qZA()),2&i&&(e.Q6J("ngModel",o.searchValue),e.xp6(1),e.Q6J("ngIf",o.showError))},directives:[r.Fj,x.o,r.JJ,r.On,l.O5,f.Hq],encapsulation:2}),t})();var v=a(9783),m=a(3787);function T(t,n){if(1&t&&(e.TgZ(0,"h6",11),e._uU(1),e.qZA()),2&t){const i=e.oxw().$implicit,o=e.oxw().$implicit;e.xp6(1),e.hij(" ",o[i.field]," ")}}function b(t,n){if(1&t&&(e.TgZ(0,"h6",11),e._uU(1),e.qZA()),2&t){const i=e.oxw().$implicit,o=e.oxw().$implicit;e.xp6(1),e.hij(" ",o[i.field]," ")}}function y(t,n){if(1&t&&(e.TgZ(0,"h6"),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&t){const i=e.oxw().$implicit,o=e.oxw().$implicit;e.xp6(1),e.Gre("p-text-color-",o[i.field]," text-bold"),e.xp6(1),e.hij(" P",o[i.field]," ")}}function A(t,n){if(1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.ALo(4,"date"),e.qZA()),2&t){const i=e.oxw().$implicit,o=e.oxw().$implicit;e.xp6(1),e.lnq(" ",e.xi3(2,3,o[i.field],"YY")-70," Years, ",e.xi3(3,6,o[i.field],"MM")," Months, ",e.xi3(4,9,o[i.field],"dd")," Days")}}function Z(t,n){if(1&t&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&t){const i=e.oxw().$implicit,o=e.oxw().$implicit;e.xp6(1),e.Oqu(o[i.field])}}function C(t,n){if(1&t&&(e.TgZ(0,"div",8),e.TgZ(1,"label",9),e._uU(2),e.qZA(),e.YNc(3,T,2,1,"h6",10),e.YNc(4,b,2,1,"h6",10),e.YNc(5,y,3,4,"h6",4),e.YNc(6,A,5,12,"div",4),e.YNc(7,Z,2,1,"div",4),e.qZA()),2&t){const i=n.$implicit;e.xp6(2),e.Oqu(i.header),e.xp6(1),e.Q6J("ngIf","customerSegment"==i.field),e.xp6(1),e.Q6J("ngIf","hni"==i.field),e.xp6(1),e.Q6J("ngIf","priority"==i.field),e.xp6(1),e.Q6J("ngIf","policyAging"==i.field),e.xp6(1),e.Q6J("ngIf","customerSegment"!=i.field&&"hni"!=i.field&&"policyAging"!=i.field&&"priority"!=i.field)}}function w(t,n){if(1&t&&(e.TgZ(0,"p-accordionTab",6),e.TgZ(1,"div",0),e.YNc(2,C,8,6,"div",7),e.qZA(),e.qZA()),2&t){const i=n.$implicit,o=e.oxw(2);e.MGl("header","Policy with Application Number: ",i.applicationName,""),e.Q6J("selected",o.hasData),e.xp6(2),e.Q6J("ngForOf",o.fieldsArr)}}function I(t,n){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,w,3,3,"p-accordionTab",5),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngForOf",i.filteredPolicies)}}const N=[{path:"",component:(()=>{class t{constructor(i,o){this.messageService=i,this.dialogService=o,this.hasData=!1}ngOnInit(){this.fieldsArr=[{field:"ownerClientId",header:"Owner client ID"},{field:"applicationName",header:"Application Number"},{field:"channel",header:"Channel"},{field:"customerSegment",header:"Customer segment"},{field:"priority",header:"Priority"},{field:"hni",header:"HNI"},{field:"ownerExactOccupation",header:"Owner exact occupation"},{field:"annualizedTargetPermium",header:"Annualized Target Premium"},{field:"countOfPolicies",header:"Count of policies"},{field:"policyStatusAsOnMonthend",header:"Policy status as on Monthend"},{field:"planName",header:"Plan name"},{field:"education",header:"Education"},{field:"ownerName",header:"Owner Name"},{field:"ownerGender",header:"Owner Gender"},{field:"policyInforcementDate",header:"Policy Inforcement date"},{field:"policyAging",header:"Policy aging (in month and days)"}],this.filteredPolicies||this.search()}search(){this.ref=this.dialogService.open(D,{header:"Application ID/ Owner client ID",width:"70%",contentStyle:{"max-height":"500px",overflow:"auto"},baseZIndex:1e4}),this.ref.onClose.subscribe(i=>{this.filteredPolicies=i,this.hasData=this.filteredPolicies.length>0})}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(v.ez),e.Y36(h.xA))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-dashboard"]],decls:5,vars:1,consts:[[1,"grid"],[1,"col-12"],["type","button","pButton","","icon","pi pi-search","label","Application ID/ Owner client ID",1,"float-right",3,"click"],[1,"mt-3"],[4,"ngIf"],[3,"header","selected",4,"ngFor","ngForOf"],[3,"header","selected"],["class","col-4",4,"ngFor","ngForOf"],[1,"col-4"],[1,"text-bold"],["class","text-bold p-text-info",4,"ngIf"],[1,"text-bold","p-text-info"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return o.search()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(3,"p-accordion",3),e.YNc(4,I,2,1,"div",4),e.qZA()),2&i&&(e.xp6(4),e.Q6J("ngIf",o.filteredPolicies))},directives:[f.Hq,m.UQ,l.O5,l.sg,m.US],pipes:[l.uU],encapsulation:2}),t})()}];let O=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[p.Bz.forChild(N)],p.Bz]}),t})(),S=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.ez,u.n,O]]}),t})()}}]);