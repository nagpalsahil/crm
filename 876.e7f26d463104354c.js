"use strict";(self.webpackChunkcrm=self.webpackChunkcrm||[]).push([[876],{3876:(S,s,l)=>{l.r(s),l.d(s,{DashboardModule:()=>J});var c=l(9808),g=l(9676),p=l(3600),e=l(5e3),u=l(7234),h=l(5330),d=l(3075),x=l(1424),f=l(845);function Z(t,n){1&t&&(e.TgZ(0,"small",3),e._uU(1,"Enter valid Application Number or Owner client Id."),e.qZA())}let _=(()=>{class t{constructor(i,o){this.policyService=i,this.ref=o,this.loading=!0,this.hasData=!1,this.showError=!1}ngOnInit(){this.policyService.getPolicies().then(i=>{this.policies=i})}searchData(){const i=[];let o;for(let a=0;a<this.policies.length;a++){const r=this.policies[a];if(r.applicationNumber==this.searchValue||r.ownerClientId==this.searchValue){o=this.policies[a];break}}if(o){for(let a=0;a<this.policies.length;a++)this.policies[a].ownerClientId==o.ownerClientId&&i.push(this.calculateData(this.policies[a]));this.ref.close(i)}else this.showError=!0}calculateData(i){let o=new Date(i.policyInforcementDate),r=(new Date).getTime()-o.getTime();return i.policyAging=r,i}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(u.d),e.Y36(h.E7))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-search-box"]],decls:3,vars:2,consts:[["type","text","placeholder","Application ID/ Owner client ID","pInputText","",1,"w-100",3,"ngModel","ngModelChange"],["id","searchValue-help","class","p-error",4,"ngIf"],["pButton","","type","button","label","Search",1,"float-right","mt-3",3,"click"],["id","searchValue-help",1,"p-error"]],template:function(i,o){1&i&&(e.TgZ(0,"input",0),e.NdJ("ngModelChange",function(r){return o.searchValue=r}),e.qZA(),e.YNc(1,Z,2,0,"small",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return o.searchData()}),e.qZA()),2&i&&(e.Q6J("ngModel",o.searchValue),e.xp6(1),e.Q6J("ngIf",o.showError))},directives:[d.Fj,x.o,d.JJ,d.On,c.O5,f.Hq],encapsulation:2}),t})();var T=l(9783),v=l(8061),m=l(3787);function b(t,n){if(1&t&&(e.TgZ(0,"div",13),e.TgZ(1,"label",6),e._uU(2),e.qZA(),e.TgZ(3,"span",14),e._uU(4),e.qZA(),e.qZA()),2&t){const i=n.$implicit,o=e.oxw(2);e.xp6(2),e.Oqu(i.header),e.xp6(2),e.hij(" ",o.findLatestOwner[i.field]," ")}}function D(t,n){if(1&t&&(e.TgZ(0,"h6",19),e._uU(1),e.qZA()),2&t){const i=e.oxw().$implicit,o=e.oxw().$implicit;e.xp6(1),e.hij(" ",o[i.field]," ")}}function A(t,n){if(1&t&&(e.TgZ(0,"h6",19),e._uU(1),e.qZA()),2&t){const i=e.oxw().$implicit,o=e.oxw().$implicit;e.xp6(1),e.hij(" ",o[i.field]," ")}}function y(t,n){if(1&t&&(e.TgZ(0,"h6"),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&t){const i=e.oxw().$implicit,o=e.oxw().$implicit;e.xp6(1),e.Gre("p-text-color-",o[i.field]," text-bold"),e.xp6(1),e.hij(" ",o[i.field]," ")}}function w(t,n){if(1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.ALo(4,"date"),e.qZA()),2&t){const i=e.oxw().$implicit,o=e.oxw().$implicit;e.xp6(1),e.lnq(" ",e.xi3(2,3,o[i.field],"YY")-70," Years, ",e.xi3(3,6,o[i.field],"MM")," Months, ",e.xi3(4,9,o[i.field],"dd")," Days")}}function C(t,n){if(1&t&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&t){const i=e.oxw().$implicit,o=e.oxw().$implicit;e.xp6(1),e.Oqu(o[i.field])}}function O(t,n){if(1&t&&(e.TgZ(0,"div",17),e.TgZ(1,"label",6),e._uU(2),e.qZA(),e.YNc(3,D,2,1,"h6",18),e.YNc(4,A,2,1,"h6",18),e.YNc(5,y,3,4,"h6",3),e.YNc(6,w,5,12,"div",3),e.YNc(7,C,2,1,"div",3),e.qZA()),2&t){const i=n.$implicit;e.xp6(2),e.Oqu(i.header),e.xp6(1),e.Q6J("ngIf","customerSegment"==i.field),e.xp6(1),e.Q6J("ngIf","hni"==i.field),e.xp6(1),e.Q6J("ngIf","priority"==i.field),e.xp6(1),e.Q6J("ngIf","policyAging"==i.field),e.xp6(1),e.Q6J("ngIf","customerSegment"!=i.field&&"hni"!=i.field&&"policyAging"!=i.field&&"priority"!=i.field)}}function I(t,n){if(1&t&&(e.TgZ(0,"p-accordionTab",15),e.TgZ(1,"div",0),e.YNc(2,O,8,6,"div",16),e.qZA(),e.qZA()),2&t){const i=n.$implicit,o=n.index,a=e.oxw(2);e.MGl("header","Policy with Application Number: ",i.applicationNumber,""),e.Q6J("selected",0==o),e.xp6(2),e.Q6J("ngForOf",a.productHeader)}}function q(t,n){if(1&t&&(e.TgZ(0,"div"),e.TgZ(1,"p-panel",4),e.TgZ(2,"div",0),e.TgZ(3,"div",5),e.TgZ(4,"label",6),e._uU(5,"Customer segment"),e.qZA(),e.TgZ(6,"span",7),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"div",5),e.TgZ(9,"label",6),e._uU(10,"HNI"),e.qZA(),e.TgZ(11,"span",7),e._uU(12),e.qZA(),e.qZA(),e.TgZ(13,"div",5),e.TgZ(14,"label",6),e._uU(15,"Priority"),e.qZA(),e.TgZ(16,"span",7),e.TgZ(17,"span"),e._uU(18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"p-panel",8),e.TgZ(20,"div",0),e.YNc(21,b,5,2,"div",9),e.qZA(),e.qZA(),e.TgZ(22,"p-panel",10),e.TgZ(23,"p-accordion",11),e.YNc(24,I,3,3,"p-accordionTab",12),e.qZA(),e.qZA(),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("toggleable",!0),e.xp6(6),e.hij(" ",i.findLatestOwner.customerSegment," "),e.xp6(5),e.hij(" ",i.findLatestOwner.hni," "),e.xp6(5),e.Gre("p-text-color-",i.findLatestOwner.priority," text-bold"),e.xp6(1),e.hij(" ",i.findLatestOwner.priority," "),e.xp6(1),e.Q6J("toggleable",!0),e.xp6(2),e.Q6J("ngForOf",i.customerDtlsHeader),e.xp6(1),e.Q6J("toggleable",!0),e.xp6(2),e.Q6J("ngForOf",i.filteredPolicies)}}const P=[{path:"",component:(()=>{class t{constructor(i,o){this.messageService=i,this.dialogService=o,this.hasData=!1}ngOnInit(){this.customerDtlsHeader=[{field:"ownerClientId",header:"Owner client ID"},{field:"ownerName",header:"Owner Name"},{field:"ownerGender",header:"Owner Gender"},{field:"ownerExactOccupation",header:"Owner exact occupation"},{field:"numberOfPolicies",header:"Number of policies"},{field:"channel",header:"Channel"},{field:"education",header:"Education"}],this.productHeader=[{field:"applicationNumber",header:"Application Number"},{field:"planName",header:"Plan name"},{field:"policyInforcementDate",header:"Policy Inforcement date"},{field:"policyTerm",header:"Policy term (PT)"},{field:"policyPayingTerm",header:"Premium paying term (PPT)"},{field:"policyStatusAsOnMonthend",header:"Policy status as on Monthend"},{field:"annualizedTargetPermium",header:"Annualized Target Premium"},{field:"policyAging",header:"Policy aging (in month and days)"}],this.filteredPolicies||this.search()}search(){this.ref=this.dialogService.open(_,{header:"Application ID/ Owner client ID",width:"70%",contentStyle:{"max-height":"500px",overflow:"auto"},baseZIndex:1e4}),this.ref.onClose.subscribe(i=>{this.filteredPolicies=i,this.findLatestOwner=this.filteredPolicies[0];for(let o=1;o<this.filteredPolicies.length;o++)new Date(this.filteredPolicies[o].policyInforcementDate)>new Date(this.findLatestOwner.policyInforcementDate)&&(this.findLatestOwner=this.filteredPolicies[o]);this.hasData=this.filteredPolicies.length>0})}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(T.ez),e.Y36(h.xA))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-dashboard"]],decls:4,vars:1,consts:[[1,"grid"],[1,"col-12"],["type","button","pButton","","icon","pi pi-search","label","Application ID/ Owner client ID",1,"float-right",3,"click"],[4,"ngIf"],["header","Overview",1,"p-panel-info",3,"toggleable"],[1,"col-4","grid"],[1,"text-bold"],[1,"text-bold","p-text-info","w-100"],["header","Customer Details",1,"mt-1","p-panel-yellow",3,"toggleable"],["class","col-3 grid",4,"ngFor","ngForOf"],["header","Product Details",1,"mt-1","p-panel-orange",3,"toggleable"],[1,"mt-3"],[3,"header","selected",4,"ngFor","ngForOf"],[1,"col-3","grid"],[1,"w-100"],[3,"header","selected"],["class","col-4",4,"ngFor","ngForOf"],[1,"col-4"],["class","text-bold p-text-info",4,"ngIf"],[1,"text-bold","p-text-info"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return o.search()}),e.qZA(),e.qZA(),e.qZA(),e.YNc(3,q,25,11,"div",3)),2&i&&(e.xp6(3),e.Q6J("ngIf",o.filteredPolicies))},directives:[f.Hq,c.O5,v.s,c.sg,m.UQ,m.US],pipes:[c.uU],encapsulation:2}),t})()}];let N=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[p.Bz.forChild(P)],p.Bz]}),t})(),J=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[c.ez,g.n,N]]}),t})()}}]);