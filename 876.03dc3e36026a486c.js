"use strict";(self.webpackChunkcrm=self.webpackChunkcrm||[]).push([[876],{3876:(J,d,l)=>{l.r(d),l.d(d,{DashboardModule:()=>N});var s=l(9808),u=l(9676),p=l(3600),e=l(5e3),g=l(7234),h=l(5330),c=l(3075),v=l(1424),f=l(845);function T(t,o){1&t&&(e.TgZ(0,"small",3),e._uU(1,"Enter valid Application Number or Owner client Id."),e.qZA())}let x=(()=>{class t{constructor(i,n){this.policyService=i,this.ref=n,this.loading=!0,this.hasData=!1,this.showError=!1}ngOnInit(){this.policyService.getPolicies().then(i=>{this.policies=i})}searchData(){const i=[];let n;for(let a=0;a<this.policies.length;a++){const r=this.policies[a];if(r.applicationNumber==this.searchValue||r.ownerClientId==this.searchValue){n=this.policies[a];break}}if(n){for(let a=0;a<this.policies.length;a++)this.policies[a].ownerClientId==n.ownerClientId&&i.push(this.calculateData(this.policies[a]));this.ref.close(i)}else this.showError=!0}calculateData(i){let n=new Date(i.policyInforcementDate),r=(new Date).getTime()-n.getTime();return i.policyAging=r,i}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(g.d),e.Y36(h.E7))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-search-box"]],decls:3,vars:2,consts:[["type","text","placeholder","Application ID/ Owner client ID","pInputText","",1,"w-100",3,"ngModel","ngModelChange"],["id","searchValue-help","class","p-error",4,"ngIf"],["pButton","","type","button","label","Search",1,"float-right","mt-3",3,"click"],["id","searchValue-help",1,"p-error"]],template:function(i,n){1&i&&(e.TgZ(0,"input",0),e.NdJ("ngModelChange",function(r){return n.searchValue=r}),e.qZA(),e.YNc(1,T,2,0,"small",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return n.searchData()}),e.qZA()),2&i&&(e.Q6J("ngModel",n.searchValue),e.xp6(1),e.Q6J("ngIf",n.showError))},directives:[c.Fj,v.o,c.JJ,c.On,s.O5,f.Hq],encapsulation:2}),t})();var b=l(9783),Z=l(8061),m=l(3787);function _(t,o){if(1&t&&(e.TgZ(0,"div",13),e.TgZ(1,"label",6),e._uU(2),e.qZA(),e.TgZ(3,"span",14),e._uU(4),e.qZA(),e.qZA()),2&t){const i=o.$implicit,n=e.oxw(2);e.xp6(2),e.Oqu(i.header),e.xp6(2),e.hij(" ",n.findLatestOwner[i.field]," ")}}function D(t,o){if(1&t&&(e.TgZ(0,"h6",19),e._uU(1),e.qZA()),2&t){const i=e.oxw().$implicit,n=e.oxw().$implicit;e.xp6(1),e.hij(" ",n[i.field]," ")}}function y(t,o){if(1&t&&(e.TgZ(0,"h6",19),e._uU(1),e.qZA()),2&t){const i=e.oxw().$implicit,n=e.oxw().$implicit;e.xp6(1),e.hij(" ",n[i.field]," ")}}function A(t,o){if(1&t&&(e.TgZ(0,"h6"),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&t){const i=e.oxw().$implicit,n=e.oxw().$implicit;e.xp6(1),e.Gre("p-text-color-",n[i.field]," text-bold"),e.xp6(1),e.hij(" ",n[i.field]," ")}}function w(t,o){if(1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.ALo(4,"date"),e.qZA()),2&t){const i=e.oxw().$implicit,n=e.oxw().$implicit;e.xp6(1),e.lnq(" ",e.xi3(2,3,n[i.field],"YY")-70," Years, ",e.xi3(3,6,n[i.field],"MM")," Months, ",e.xi3(4,9,n[i.field],"dd")," Days")}}function O(t,o){if(1&t&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&t){const i=e.oxw().$implicit,n=e.oxw().$implicit;e.xp6(1),e.Oqu(n[i.field])}}function C(t,o){if(1&t&&(e.TgZ(0,"div",17),e.TgZ(1,"label",6),e._uU(2),e.qZA(),e.YNc(3,D,2,1,"h6",18),e.YNc(4,y,2,1,"h6",18),e.YNc(5,A,3,4,"h6",3),e.YNc(6,w,5,12,"div",3),e.YNc(7,O,2,1,"div",3),e.qZA()),2&t){const i=o.$implicit;e.xp6(2),e.Oqu(i.header),e.xp6(1),e.Q6J("ngIf","customerSegment"==i.field),e.xp6(1),e.Q6J("ngIf","hni"==i.field),e.xp6(1),e.Q6J("ngIf","priority"==i.field),e.xp6(1),e.Q6J("ngIf","policyAging"==i.field),e.xp6(1),e.Q6J("ngIf","customerSegment"!=i.field&&"hni"!=i.field&&"policyAging"!=i.field&&"priority"!=i.field)}}function I(t,o){if(1&t&&(e.TgZ(0,"p-accordionTab",15),e.TgZ(1,"div",0),e.YNc(2,C,8,6,"div",16),e.qZA(),e.qZA()),2&t){const i=o.$implicit,n=o.index,a=e.oxw(2);e.MGl("header","Policy with Application Number: ",i.applicationNumber,""),e.Q6J("selected",0==n),e.xp6(2),e.Q6J("ngForOf",a.productHeader)}}function P(t,o){if(1&t&&(e.TgZ(0,"div"),e.TgZ(1,"p-panel",4),e.TgZ(2,"div",0),e.TgZ(3,"div",5),e.TgZ(4,"label",6),e._uU(5,"Customer segment"),e.qZA(),e.TgZ(6,"span",7),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"div",5),e.TgZ(9,"label",6),e._uU(10,"HNI"),e.qZA(),e.TgZ(11,"span",7),e._uU(12),e.qZA(),e.qZA(),e.TgZ(13,"div",5),e.TgZ(14,"label",6),e._uU(15,"Priority"),e.qZA(),e.TgZ(16,"span",7),e.TgZ(17,"span"),e._uU(18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"p-panel",8),e.TgZ(20,"div",0),e.YNc(21,_,5,2,"div",9),e.qZA(),e.qZA(),e.TgZ(22,"p-panel",10),e.TgZ(23,"p-accordion",11),e.YNc(24,I,3,3,"p-accordionTab",12),e.qZA(),e.qZA(),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("toggleable",!0),e.xp6(6),e.hij(" ",i.findLatestOwner.customerSegment," "),e.xp6(5),e.hij(" ",i.findLatestOwner.hni," "),e.xp6(5),e.Gre("p-text-color-",i.findLatestOwner.priority," text-bold"),e.xp6(1),e.hij(" ",i.findLatestOwner.priority," "),e.xp6(1),e.Q6J("toggleable",!0),e.xp6(2),e.Q6J("ngForOf",i.customerDtlsHeader),e.xp6(1),e.Q6J("toggleable",!0),e.xp6(2),e.Q6J("ngForOf",i.filteredPolicies)}}const S=[{path:"",component:(()=>{class t{constructor(i,n){this.messageService=i,this.dialogService=n,this.hasData=!1}ngOnInit(){this.customerDtlsHeader=[{field:"ownerClientId",header:"Owner client ID"},{field:"ownerName",header:"Owner Name"},{field:"ownerGender",header:"Owner Gender"},{field:"ownerExactOccupation",header:"Owner exact occupation"},{field:"numberOfPolicies",header:"Number of policies"},{field:"channel",header:"Channel"},{field:"education",header:"Education"}],this.productHeader=[{field:"applicationNumber",header:"Application Number"},{field:"planName",header:"Plan name"},{field:"policyInforcementDate",header:"Policy Inforcement date"},{field:"policyTerm",header:"Policy term (PT)"},{field:"policyPayingTerm",header:"Premium paying term (PPT)"},{field:"policyStatusAsOnMonthend",header:"Policy status as on Monthend"},{field:"annualizedTargetPermium",header:"Annualized Target Premium"},{field:"policyAging",header:"Policy aging (in month and days)"}],this.priorityDef=[{value:"P1",defination:"Highest priority basis persona and ticket size"},{value:"P2",defination:"Medium priority basis persona and ticket size"},{value:"P3",defination:"Low priority basis profile and small ticket size"},{value:"P4",defination:"Lowest priority basis profile and small ticket size"}],this.segmentDef=[{value:"USP",defination:"This customer belongs to Urban Salaried Professional segment"},{value:"BO-HE",defination:"This customer belongs to Business owner/ Self employed- Highly educated (Graduate and above) segment"},{value:"BO-LE",defination:"This customer belongs to Business owner/ Self employed- Less educated (Diploma and below) segment"},{value:"ENR",defination:"This customer belongs to Empty nesters (Housewives, students etc.) and Retirees segment"},{value:"UMC",defination:"This customer belongs to Urban Mass (Salaried and less educated) segment"},{value:"RRI",defination:"This customer belongs to Rural Individuals- Farmers/ Agriculture and Salaried segment"},{value:"NRI",defination:"This customer is Non-Resident Indian"},{value:"HNI",defination:"This customer is HNI basis more than 2x ticket size of average within Channel and Customer segment"}],this.filteredPolicies||this.search()}search(){this.ref=this.dialogService.open(x,{header:"Application ID/ Owner client ID",width:"70%",contentStyle:{"max-height":"500px",overflow:"auto"},baseZIndex:1e4}),this.ref.onClose.subscribe(i=>{this.filteredPolicies=i,this.findLatestOwner=this.filteredPolicies[0];for(let n=1;n<this.filteredPolicies.length;n++)new Date(this.filteredPolicies[n].policyInforcementDate)>new Date(this.findLatestOwner.policyInforcementDate)&&(this.findLatestOwner=this.filteredPolicies[n]);this.findLatestOwner.priority+=" - "+this.priorityDef.find(({value:n})=>n===this.findLatestOwner.priority).defination,this.findLatestOwner.customerSegment+=" - "+this.segmentDef.find(({value:n})=>n===this.findLatestOwner.customerSegment).defination,this.hasData=this.filteredPolicies.length>0})}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(b.ez),e.Y36(h.xA))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-dashboard"]],decls:4,vars:1,consts:[[1,"grid"],[1,"col-12"],["type","button","pButton","","icon","pi pi-search","label","Application ID/ Owner client ID",1,"float-right",3,"click"],[4,"ngIf"],["header","Overview",1,"p-panel-info",3,"toggleable"],[1,"col-4","grid"],[1,"text-bold"],[1,"text-bold","p-text-info","col-12","grid"],["header","Customer Details",1,"mt-1","p-panel-yellow",3,"toggleable"],["class","col-3 grid",4,"ngFor","ngForOf"],["header","Product Details",1,"mt-1","p-panel-orange",3,"toggleable"],[1,"mt-3"],[3,"header","selected",4,"ngFor","ngForOf"],[1,"col-3","grid"],[1,"w-100"],[3,"header","selected"],["class","col-4",4,"ngFor","ngForOf"],[1,"col-4"],["class","text-bold p-text-info",4,"ngIf"],[1,"text-bold","p-text-info"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return n.search()}),e.qZA(),e.qZA(),e.qZA(),e.YNc(3,P,25,11,"div",3)),2&i&&(e.xp6(3),e.Q6J("ngIf",n.filteredPolicies))},directives:[f.Hq,s.O5,Z.s,s.sg,m.UQ,m.US],pipes:[s.uU],encapsulation:2}),t})()}];let q=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[p.Bz.forChild(S)],p.Bz]}),t})(),N=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[s.ez,u.n,q]]}),t})()}}]);